<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Haru Shop — 서비스 구조·DB 설계·API 명세·트러블슈팅</title>
  <style>
    :root { --bg: #f8f9fa; --card: #fff; --border: #dee2e6; --text: #212529; --muted: #6c757d; --primary: #0d6efd; --success: #198754; }
    * { box-sizing: border-box; }
    body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Noto Sans KR", sans-serif; background: var(--bg); color: var(--text); line-height: 1.6; margin: 0; padding: 1rem 2rem 2rem; }
    .container { max-width: 960px; margin: 0 auto; }
    h1 { font-size: 1.75rem; margin: 0 0 0.5rem; border-bottom: 2px solid var(--primary); padding-bottom: 0.5rem; }
    .subtitle { color: var(--muted); font-size: 0.95rem; margin-bottom: 2rem; }
    h2 { font-size: 1.25rem; margin: 2rem 0 1rem; color: var(--primary); }
    h3 { font-size: 1.05rem; margin: 1.25rem 0 0.5rem; }
    section { background: var(--card); border: 1px solid var(--border); border-radius: 8px; padding: 1.25rem 1.5rem; margin-bottom: 1.5rem; }
    table { width: 100%; border-collapse: collapse; font-size: 0.9rem; }
    th, td { border: 1px solid var(--border); padding: 0.5rem 0.75rem; text-align: left; }
    th { background: var(--bg); font-weight: 600; }
    pre, code { background: #f1f3f4; padding: 0.15em 0.4em; border-radius: 4px; font-size: 0.875em; font-family: ui-monospace, monospace; }
    pre { padding: 1rem; overflow-x: auto; white-space: pre; margin: 0.5rem 0; }
    ul { margin: 0.5rem 0; padding-left: 1.25rem; }
    li { margin: 0.25rem 0; }
    .toc { margin-bottom: 2rem; padding: 1rem 1.25rem; background: var(--card); border: 1px solid var(--border); border-radius: 8px; }
    .toc ul { list-style: none; padding-left: 0; }
    .toc li { margin: 0.4rem 0; }
    .toc a { color: var(--primary); text-decoration: none; }
    .toc a:hover { text-decoration: underline; }
    .diagram { max-width: 100%; margin: 1rem 0; border: 1px solid var(--border); border-radius: 8px; overflow: hidden; background: #fff; }
    .diagram svg { display: block; width: 100%; height: auto; }
    details { margin: 0.75rem 0; border: 1px solid var(--border); border-radius: 6px; overflow: hidden; }
    details[open] summary { border-bottom: 1px solid var(--border); }
    summary { padding: 0.6rem 0.75rem; background: var(--bg); cursor: pointer; font-weight: 500; list-style: none; }
    summary::-webkit-details-marker { display: none; }
    summary::before { content: "▶ "; font-size: 0.7em; }
    details[open] summary::before { content: "▼ "; }
    .api-example { padding: 0.75rem 1rem; font-size: 0.85rem; }
    .api-example pre { margin: 0.25rem 0; }
    .api-example .label { font-weight: 600; color: var(--muted); margin-top: 0.5rem; }
    .api-example .label:first-child { margin-top: 0; }
    .story-box { background: #f8f9fa; border-left: 4px solid var(--primary); padding: 1rem 1.25rem; margin: 1rem 0; border-radius: 0 6px 6px 0; }
    .story-box h4 { margin: 0 0 0.5rem; font-size: 1rem; }
    .story-box p { margin: 0.25rem 0; }
    .table-desc { color: var(--muted); font-size: 0.9rem; margin: -0.25rem 0 0.5rem; }
  </style>
</head>
<body>
  <div class="container">
    <h1>Haru Shop</h1>
    <p class="subtitle">트러블슈팅 · 서비스 구조도 · DB 설계 · API 명세 · 전체 테이블 정의서</p>

    <nav class="toc" aria-label="목차">
      <h2 id="toc">목차</h2>
      <ul>
        <li><a href="#troubleshooting">1. 트러블슈팅</a></li>
        <li><a href="#service-architecture">2. 서비스 구조도 및 DB 설계도</a></li>
        <li><a href="#api-spec">3. API 명세서 (Spring Boot)</a></li>
        <li><a href="#table-definitions">4. 전체 테이블 정의서</a></li>
      </ul>
    </nav>

    <!-- ========== 1. 트러블슈팅 ========== -->
    <section id="troubleshooting">
      <h2>1. 트러블슈팅</h2>

      <h3>Docker</h3>
      <table>
        <thead><tr><th>현상</th><th>확인·조치</th></tr></thead>
        <tbody>
          <tr><td>컨테이너가 기동하지 않음</td><td><code>docker compose up -d</code> 후 <code>docker compose ps</code>, <code>docker compose logs &lt;서비스명&gt;</code> 로 로그 확인</td></tr>
          <tr><td>포트 충돌</td><td>501, 502, 503, 809 사용 중인 프로세스 확인 후 종료 또는 <code>docker-compose.yml</code>에서 포트 변경</td></tr>
          <tr><td>Spring 기동 실패</td><td>MariaDB가 먼저 healthy 될 때까지 대기. <code>depends_on: mariadb: condition: service_healthy</code> 확인</td></tr>
        </tbody>
      </table>

      <h3>DB</h3>
      <table>
        <thead><tr><th>현상</th><th>확인·조치</th></tr></thead>
        <tbody>
          <tr><td>테이블 없음 / 스키마 오류</td><td><code>sql/schema.sql</code> 적용. 도커: <code>docker exec -i haru-shop-mariadb mariadb -u harushop -pharushop harushop &lt; sql/schema.sql</code></td></tr>
          <tr><td>사용하지 않는 테이블 정리</td><td><code>sql/drop-unused-tables.sql</code> 실행 (동일하게 <code>docker exec -i ...</code>)</td></tr>
          <tr><td>로컬에 mysql 클라이언트 없음</td><td>컨테이너 안의 <code>mariadb</code> 클라이언트로 실행</td></tr>
        </tbody>
      </table>

      <h3>인증·API</h3>
      <table>
        <thead><tr><th>현상</th><th>확인·조치</th></tr></thead>
        <tbody>
          <tr><td>401 Unauthorized</td><td>로그인 후 JWT를 <code>Authorization: Bearer &lt;token&gt;</code> 으로 전달</td></tr>
          <tr><td>403 Forbidden</td><td>해당 API는 로그인 필요. 프론트에서 로그인 페이지로 유도</td></tr>
          <tr><td>Google/소셜 로그인 실패</td><td><code>.env</code>에 <code>GOOGLE_CLIENT_ID</code>, <code>FRONTEND_REDIRECT_URI</code> 등 콜백 URL 설정 확인</td></tr>
        </tbody>
      </table>

      <h3>스토리텔링: Spring과 MariaDB 기동 순서 문제</h3>
      <div class="story-box">
        <h4>문제</h4>
        <p><code>docker compose up</code> 시 Spring Boot 컨테이너가 반복 재시작하거나, "Communications link failure" 등 DB 연결 오류로 기동에 실패했습니다.</p>
        <h4>원인</h4>
        <p>Spring이 MariaDB보다 먼저 기동하면서, DB가 아직 준비되지 않은 상태에서 연결을 시도했기 때문입니다. <code>depends_on</code>만으로는 "컨테이너 시작" 순서만 보장되고, MariaDB가 실제로 accept 가능한 상태가 되기까지의 시간은 보장하지 않습니다.</p>
        <h4>해결</h4>
        <p><code>docker-compose.yml</code>에서 MariaDB에 <code>healthcheck</code>를 추가하고, Spring 서비스에 <code>depends_on: mariadb: condition: service_healthy</code>를 설정했습니다. 이렇게 하면 MariaDB가 healthcheck를 통과한 뒤에만 Spring이 시작되어, 연결 오류가 사라졌습니다.</p>
        <h4>결과</h4>
        <p>매번 <code>docker compose up -d</code> 시 Spring이 안정적으로 기동하며, 로그에서 "Started HaruShopApplication" 확인이 가능해졌습니다.</p>
      </div>
    </section>

    <!-- ========== 2. 서비스 구조도 및 DB 설계도 ========== -->
    <section id="service-architecture">
      <h2>2. 서비스 구조도 및 DB 설계도</h2>

      <h3>서비스 구조</h3>
      <p>Next(쇼핑몰)·PHP(관리자)가 Spring API를 통해 MariaDB를 사용하는 구조입니다.</p>
      <figure class="diagram" aria-label="서비스 구조도">
        <svg viewBox="0 0 480 200" xmlns="http://www.w3.org/2000/svg">
          <defs>
            <linearGradient id="archNext" x1="0%" y1="0%" x2="0%" y2="100%"><stop offset="0%" stop-color="#0d6efd"/><stop offset="100%" stop-color="#0a58ca"/></linearGradient>
            <linearGradient id="archSpring" x1="0%" y1="0%" x2="0%" y2="100%"><stop offset="0%" stop-color="#198754"/><stop offset="100%" stop-color="#157347"/></linearGradient>
            <linearGradient id="archDb" x1="0%" y1="0%" x2="0%" y2="100%"><stop offset="0%" stop-color="#fd7e14"/><stop offset="100%" stop-color="#e8590c"/></linearGradient>
            <linearGradient id="archPhp" x1="0%" y1="0%" x2="0%" y2="100%"><stop offset="0%" stop-color="#6f42c1"/><stop offset="100%" stop-color="#5a32a3"/></linearGradient>
            <marker id="arrowHead" markerWidth="8" markerHeight="6" refX="7" refY="3" orient="auto"><path d="M0 0 L8 3 L0 6 Z" fill="#495057"/></marker>
          </defs>
          <!-- Next.js -->
          <rect x="20" y="50" width="110" height="80" rx="8" fill="url(#archNext)" opacity="0.95"/>
          <text x="75" y="88" text-anchor="middle" fill="#fff" font-size="13" font-weight="600">Next.js</text>
          <text x="75" y="108" text-anchor="middle" fill="rgba(255,255,255,0.95)" font-size="10">쇼핑몰 (501)</text>
          <!-- Spring Boot -->
          <rect x="170" y="40" width="110" height="100" rx="8" fill="url(#archSpring)" opacity="0.95"/>
          <text x="225" y="82" text-anchor="middle" fill="#fff" font-size="12" font-weight="600">Spring Boot</text>
          <text x="225" y="100" text-anchor="middle" fill="rgba(255,255,255,0.95)" font-size="10">REST API (502)</text>
          <!-- MariaDB -->
          <rect x="320" y="50" width="110" height="80" rx="8" fill="url(#archDb)" opacity="0.95"/>
          <text x="375" y="88" text-anchor="middle" fill="#fff" font-size="13" font-weight="600">MariaDB</text>
          <text x="375" y="108" text-anchor="middle" fill="rgba(255,255,255,0.95)" font-size="10">(503)</text>
          <!-- PHP 관리자 -->
          <rect x="200" y="160" width="100" height="32" rx="6" fill="url(#archPhp)" opacity="0.95"/>
          <text x="250" y="178" text-anchor="middle" fill="#fff" font-size="11" font-weight="600">PHP 관리자 (809)</text>
          <!-- 화살표: Next → Spring -->
          <line x1="130" y1="90" x2="167" y2="90" stroke="#495057" stroke-width="2" marker-end="url(#arrowHead)"/>
          <!-- 화살표: Spring → MariaDB -->
          <line x1="280" y1="90" x2="317" y2="90" stroke="#495057" stroke-width="2" marker-end="url(#arrowHead)"/>
          <!-- 화살표: Spring → PHP (점선) -->
          <line x1="225" y1="140" x2="225" y2="157" stroke="#495057" stroke-width="1.5" stroke-dasharray="4 3"/>
        </svg>
      </figure>
      <ul>
        <li><strong>Next</strong>: 브라우저 → Spring API 호출 (JWT Bearer). 쇼핑몰 회원·상품·장바구니·주문·마이페이지.</li>
        <li><strong>Spring</strong>: 인증(Google/Naver/Kakao), 상품·카테고리·배너·장바구니·찜·주문·마이페이지. MyBatis로 MariaDB 접근.</li>
        <li><strong>PHP</strong>: 관리자 로그인 후 카테고리·상품·배너·쿠폰·주문 등 CRUD. 동일 MariaDB 사용.</li>
      </ul>
      <h3>기술 선택 이유 (Why)</h3>
      <ul>
        <li><strong>Next.js</strong>: SSR·개발 생산성과 SEO를 위해 React 기반 Next.js로 쇼핑몰 프론트를 구성.</li>
        <li><strong>Spring Boot</strong>: API 일원화와 Java 생태계·유지보수성을 고려해 REST API 서버로 선택.</li>
        <li><strong>PHP (관리자)</strong>: 관리 업무의 생산성을 위해 익숙한 PHP 환경으로 관리자 페이지를 구축.</li>
        <li><strong>MariaDB</strong>: 오픈소스의 확장성과 MySQL 호환성을 고려한 MariaDB 선택.</li>
      </ul>

      <h3>ERD — 주요 테이블 관계</h3>
      <p>회원·카테고리·상품·주문·장바구니·찜 등 핵심 테이블 간 관계입니다.</p>

      <p><strong>테이블 요약</strong></p>
      <table>
        <thead><tr><th>영역</th><th>테이블</th><th>설명</th></tr></thead>
        <tbody>
          <tr><td>회원</td><td><code>users</code></td><td>소셜 로그인, 프로필</td></tr>
          <tr><td>상품</td><td><code>categories</code>, <code>products</code>, <code>product_skus</code> 등</td><td>카테고리·상품·옵션·SKU</td></tr>
          <tr><td>주문</td><td><code>orders</code>, <code>order_items</code></td><td>주문·주문상품</td></tr>
          <tr><td>쇼핑</td><td><code>cart_items</code>, <code>wishlists</code></td><td>장바구니, 찜</td></tr>
          <tr><td>마이페이지</td><td><code>reviews</code>, <code>user_addresses</code> 등</td><td>리뷰·배송지</td></tr>
        </tbody>
      </table>
    </section>

    <!-- ========== 2. API 명세서 ========== -->
    <section id="api-spec">
      <h2>3. API 명세서 (Spring Boot)</h2>
      <p>Base URL: <code>http://localhost:502/api</code> (인증 API는 <code>Authorization: Bearer &lt;JWT&gt;</code>)</p>

      <h3>인증</h3>
      <table>
        <thead><tr><th>메서드</th><th>경로</th><th>설명</th></tr></thead>
        <tbody>
          <tr><td>GET</td><td><code>/auth/google</code></td><td>Google 로그인 리다이렉트</td></tr>
          <tr><td>GET</td><td><code>/auth/google/callback</code></td><td>Google 콜백</td></tr>
          <tr><td>POST</td><td><code>/auth/google</code></td><td>Google idToken으로 로그인 (JSON body)</td></tr>
          <tr><td>GET</td><td><code>/auth/kakao</code></td><td>카카오 로그인 리다이렉트</td></tr>
          <tr><td>GET</td><td><code>/auth/naver</code></td><td>네이버 로그인 리다이렉트</td></tr>
        </tbody>
      </table>

      <h3>공개 API</h3>
      <table>
        <thead><tr><th>메서드</th><th>경로</th><th>설명</th></tr></thead>
        <tbody>
          <tr><td>GET</td><td><code>/categories</code></td><td>카테고리 목록</td></tr>
          <tr><td>GET</td><td><code>/products</code></td><td>상품 목록 (categoryId, search, limit, offset)</td></tr>
          <tr><td>GET</td><td><code>/products/{id}</code></td><td>상품 상세</td></tr>
          <tr><td>GET</td><td><code>/banners</code></td><td>배너 목록</td></tr>
        </tbody>
      </table>

      <details>
        <summary>예시: POST /auth/google — Request / Response</summary>
        <div class="api-example">
          <div class="label">Request (JSON)</div>
          <pre>{
  "idToken": "eyJhbGciOiJSUzI1NiIs..."
}</pre>
          <div class="label">Response (200)</div>
          <pre>{
  "accessToken": "eyJhbGciOiJIUzI1NiJ9...",
  "user": {
    "id": 1,
    "email": "user@example.com",
    "name": "홍길동",
    "picture": "https://..."
  }
}</pre>
        </div>
      </details>

      <h3>인증 필요 API</h3>
      <table>
        <thead><tr><th>메서드</th><th>경로</th><th>설명</th></tr></thead>
        <tbody>
          <tr><td>GET</td><td><code>/cart</code></td><td>장바구니 목록</td></tr>
          <tr><td>POST</td><td><code>/cart</code></td><td>장바구니 담기</td></tr>
          <tr><td>PUT</td><td><code>/cart/{id}</code></td><td>장바구니 수량 변경</td></tr>
          <tr><td>DELETE</td><td><code>/cart/{id}</code></td><td>장바구니 삭제</td></tr>
          <tr><td>GET</td><td><code>/wishlist</code></td><td>찜 목록</td></tr>
          <tr><td>POST</td><td><code>/wishlist</code></td><td>찜 추가</td></tr>
          <tr><td>DELETE</td><td><code>/wishlist/{productId}</code></td><td>찜 삭제</td></tr>
          <tr><td>GET</td><td><code>/orders</code></td><td>주문 목록</td></tr>
          <tr><td>POST</td><td><code>/orders</code></td><td>주문 생성</td></tr>
          <tr><td>GET</td><td><code>/mypage/coupons</code></td><td>내 쿠폰</td></tr>
          <tr><td>GET</td><td><code>/mypage/addresses</code></td><td>배송지 목록</td></tr>
          <tr><td>POST</td><td><code>/mypage/addresses</code></td><td>배송지 등록</td></tr>
          <tr><td>PUT</td><td><code>/mypage/addresses/{id}</code></td><td>배송지 수정</td></tr>
          <tr><td>DELETE</td><td><code>/mypage/addresses/{id}</code></td><td>배송지 삭제</td></tr>
          <tr><td>GET</td><td><code>/mypage/profile</code></td><td>내 프로필</td></tr>
          <tr><td>PATCH</td><td><code>/mypage/profile</code></td><td>프로필 수정</td></tr>
        </tbody>
      </table>

      <details>
        <summary>예시: POST /orders — Request / Response</summary>
        <div class="api-example">
          <div class="label">Request (JSON)</div>
          <pre>{
  "cartItemIds": [3, 5],
  "recipientName": "홍길동",
  "recipientPhone": "010-1234-5678",
  "postcode": "12345",
  "address": "서울시 강남구 ...",
  "addressDetail": "101동 202호",
  "deliveryMemo": "문 앞에 놓아주세요"
}</pre>
          <div class="label">Response (201)</div>
          <pre>{
  "orderId": 12,
  "orderNumber": "ORD-20250131-0012",
  "totalAmount": 45000
}</pre>
        </div>
      </details>
    </section>

    <!-- ========== 4. 전체 테이블 정의서 ========== -->
    <section id="table-definitions">
      <h2>4. 전체 테이블 정의서</h2>
      <p>DB 테이블별 컬럼 정의입니다.</p>

      <h3>users</h3>
      <p class="table-desc">사용자 (소셜 로그인, 마이페이지)</p>
      <table>
        <thead><tr><th>컬럼명</th><th>타입</th><th>NULL</th><th>키</th><th>기본값</th><th>설명</th></tr></thead>
        <tbody>
          <tr><td>id</td><td>BIGINT</td><td>NO</td><td>PK</td><td>AUTO_INCREMENT</td><td>PK</td></tr>
          <tr><td>email</td><td>VARCHAR(255)</td><td>NO</td><td>UNIQUE</td><td>—</td><td>이메일 (로그인 ID)</td></tr>
          <tr><td>name</td><td>VARCHAR(100)</td><td>YES</td><td>—</td><td>—</td><td>이름</td></tr>
          <tr><td>picture</td><td>VARCHAR(500)</td><td>YES</td><td>—</td><td>—</td><td>프로필 이미지 URL</td></tr>
          <tr><td>provider</td><td>VARCHAR(50)</td><td>NO</td><td>—</td><td>google</td><td>소셜 로그인 제공자</td></tr>
          <tr><td>role</td><td>VARCHAR(20)</td><td>NO</td><td>—</td><td>user</td><td>역할: user, seller, admin</td></tr>
          <tr><td>created_at</td><td>DATETIME</td><td>NO</td><td>—</td><td>CURRENT_TIMESTAMP</td><td>가입일</td></tr>
          <tr><td>updated_at</td><td>DATETIME</td><td>NO</td><td>—</td><td>ON UPDATE</td><td>수정일</td></tr>
        </tbody>
      </table>

      <h3>categories</h3>
      <p class="table-desc">카테고리 (홈·상품 카테고리)</p>
      <table>
        <thead><tr><th>컬럼명</th><th>타입</th><th>NULL</th><th>키</th><th>기본값</th><th>설명</th></tr></thead>
        <tbody>
          <tr><td>id</td><td>BIGINT</td><td>NO</td><td>PK</td><td>AUTO_INCREMENT</td><td>PK</td></tr>
          <tr><td>name</td><td>VARCHAR(100)</td><td>NO</td><td>—</td><td>—</td><td>카테고리명</td></tr>
          <tr><td>slug</td><td>VARCHAR(100)</td><td>NO</td><td>UNIQUE</td><td>—</td><td>URL용 슬러그</td></tr>
          <tr><td>icon</td><td>VARCHAR(50)</td><td>YES</td><td>—</td><td>—</td><td>아이콘 식별자</td></tr>
          <tr><td>sort_order</td><td>INT</td><td>NO</td><td>—</td><td>0</td><td>표시 순서</td></tr>
          <tr><td>created_at</td><td>DATETIME</td><td>NO</td><td>—</td><td>CURRENT_TIMESTAMP</td><td>등록일</td></tr>
          <tr><td>updated_at</td><td>DATETIME</td><td>NO</td><td>—</td><td>ON UPDATE</td><td>수정일</td></tr>
        </tbody>
      </table>

      <h3>delivery_fee_templates</h3>
      <p class="table-desc">배송비 템플릿 (무료/유료/조건부무료/수량별)</p>
      <table>
        <thead><tr><th>컬럼명</th><th>타입</th><th>NULL</th><th>키</th><th>기본값</th><th>설명</th></tr></thead>
        <tbody>
          <tr><td>id</td><td>BIGINT</td><td>NO</td><td>PK</td><td>AUTO_INCREMENT</td><td>PK</td></tr>
          <tr><td>name</td><td>VARCHAR(100)</td><td>NO</td><td>—</td><td>—</td><td>템플릿명</td></tr>
          <tr><td>fee_type</td><td>VARCHAR(20)</td><td>NO</td><td>—</td><td>—</td><td>free / paid / conditional_free / per_quantity</td></tr>
          <tr><td>base_fee</td><td>DECIMAL(12,0)</td><td>NO</td><td>—</td><td>0</td><td>고정 배송비 또는 1단위당 금액</td></tr>
          <tr><td>free_over_amount</td><td>DECIMAL(12,0)</td><td>YES</td><td>—</td><td>—</td><td>조건부 무료 기준 금액</td></tr>
          <tr><td>shipping_method</td><td>VARCHAR(20)</td><td>NO</td><td>—</td><td>parcel</td><td>배송방법</td></tr>
          <tr><td>is_active</td><td>TINYINT(1)</td><td>NO</td><td>—</td><td>1</td><td>사용 여부</td></tr>
          <tr><td>created_at</td><td>DATETIME</td><td>NO</td><td>—</td><td>CURRENT_TIMESTAMP</td><td>등록일</td></tr>
          <tr><td>updated_at</td><td>DATETIME</td><td>NO</td><td>—</td><td>ON UPDATE</td><td>수정일</td></tr>
        </tbody>
      </table>

      <h3>address_codes</h3>
      <p class="table-desc">출고지/반품지 주소 코드</p>
      <table>
        <thead><tr><th>컬럼명</th><th>타입</th><th>NULL</th><th>키</th><th>기본값</th><th>설명</th></tr></thead>
        <tbody>
          <tr><td>id</td><td>BIGINT</td><td>NO</td><td>PK</td><td>AUTO_INCREMENT</td><td>PK</td></tr>
          <tr><td>code</td><td>VARCHAR(50)</td><td>NO</td><td>UNIQUE</td><td>—</td><td>고유 주소 코드</td></tr>
          <tr><td>address_type</td><td>VARCHAR(20)</td><td>NO</td><td>—</td><td>—</td><td>warehouse / return</td></tr>
          <tr><td>name</td><td>VARCHAR(100)</td><td>YES</td><td>—</td><td>—</td><td>관리용 명칭</td></tr>
          <tr><td>address</td><td>VARCHAR(500)</td><td>NO</td><td>—</td><td>—</td><td>기본 주소</td></tr>
          <tr><td>address_detail</td><td>VARCHAR(200)</td><td>YES</td><td>—</td><td>—</td><td>상세 주소</td></tr>
          <tr><td>is_active</td><td>TINYINT(1)</td><td>NO</td><td>—</td><td>1</td><td>사용 여부</td></tr>
          <tr><td>created_at</td><td>DATETIME</td><td>NO</td><td>—</td><td>CURRENT_TIMESTAMP</td><td>등록일</td></tr>
          <tr><td>updated_at</td><td>DATETIME</td><td>NO</td><td>—</td><td>ON UPDATE</td><td>수정일</td></tr>
        </tbody>
      </table>

      <h3>products</h3>
      <p class="table-desc">상품</p>
      <table>
        <thead><tr><th>컬럼명</th><th>타입</th><th>NULL</th><th>키</th><th>기본값</th><th>설명</th></tr></thead>
        <tbody>
          <tr><td>id</td><td>BIGINT</td><td>NO</td><td>PK</td><td>AUTO_INCREMENT</td><td>PK</td></tr>
          <tr><td>category_id</td><td>BIGINT</td><td>NO</td><td>FK→categories</td><td>—</td><td>카테고리 FK</td></tr>
          <tr><td>name</td><td>VARCHAR(200)</td><td>NO</td><td>—</td><td>—</td><td>상품명</td></tr>
          <tr><td>slug</td><td>VARCHAR(200)</td><td>YES</td><td>—</td><td>—</td><td>URL용 슬러그</td></tr>
          <tr><td>price</td><td>DECIMAL(12,0)</td><td>NO</td><td>—</td><td>—</td><td>판매가 (원)</td></tr>
          <tr><td>description</td><td>TEXT</td><td>YES</td><td>—</td><td>—</td><td>상품 소개</td></tr>
          <tr><td>image_url</td><td>VARCHAR(500)</td><td>YES</td><td>—</td><td>—</td><td>대표 이미지 URL</td></tr>
          <tr><td>stock</td><td>INT</td><td>NO</td><td>—</td><td>0</td><td>재고 수량</td></tr>
          <tr><td>is_active</td><td>TINYINT(1)</td><td>NO</td><td>—</td><td>1</td><td>노출 여부</td></tr>
          <tr><td>delivery_fee_template_id</td><td>BIGINT</td><td>YES</td><td>FK→delivery_fee_templates</td><td>—</td><td>배송비 템플릿 FK</td></tr>
          <tr><td>created_at</td><td>DATETIME</td><td>NO</td><td>—</td><td>CURRENT_TIMESTAMP</td><td>등록일</td></tr>
          <tr><td>updated_at</td><td>DATETIME</td><td>NO</td><td>—</td><td>ON UPDATE</td><td>수정일</td></tr>
        </tbody>
      </table>

      <h3>product_images</h3>
      <p class="table-desc">상품 이미지 (여러 장, 상품 상세·캐러셀)</p>
      <table>
        <thead><tr><th>컬럼명</th><th>타입</th><th>NULL</th><th>키</th><th>기본값</th><th>설명</th></tr></thead>
        <tbody>
          <tr><td>id</td><td>BIGINT</td><td>NO</td><td>PK</td><td>AUTO_INCREMENT</td><td>PK</td></tr>
          <tr><td>product_id</td><td>BIGINT</td><td>NO</td><td>FK→products</td><td>—</td><td>상품 FK</td></tr>
          <tr><td>image_url</td><td>VARCHAR(500)</td><td>NO</td><td>—</td><td>—</td><td>이미지 URL</td></tr>
          <tr><td>sort_order</td><td>INT</td><td>NO</td><td>—</td><td>0</td><td>표시 순서</td></tr>
          <tr><td>created_at</td><td>DATETIME</td><td>NO</td><td>—</td><td>CURRENT_TIMESTAMP</td><td>등록일</td></tr>
        </tbody>
      </table>

      <h3>option_masters</h3>
      <p class="table-desc">옵션 그룹 (단독형/조합형/직접입력형)</p>
      <table>
        <thead><tr><th>컬럼명</th><th>타입</th><th>NULL</th><th>키</th><th>기본값</th><th>설명</th></tr></thead>
        <tbody>
          <tr><td>id</td><td>BIGINT</td><td>NO</td><td>PK</td><td>AUTO_INCREMENT</td><td>PK</td></tr>
          <tr><td>product_id</td><td>BIGINT</td><td>NO</td><td>FK→products</td><td>—</td><td>상품 FK</td></tr>
          <tr><td>name</td><td>VARCHAR(100)</td><td>NO</td><td>—</td><td>—</td><td>옵션 그룹명 (예: 색상, 사이즈)</td></tr>
          <tr><td>option_type</td><td>VARCHAR(20)</td><td>NO</td><td>—</td><td>combination</td><td>simple / combination / text</td></tr>
          <tr><td>option_key</td><td>VARCHAR(50)</td><td>YES</td><td>—</td><td>—</td><td>조합형 SKU 키용</td></tr>
          <tr><td>is_required</td><td>TINYINT(1)</td><td>NO</td><td>—</td><td>0</td><td>필수 여부</td></tr>
          <tr><td>sort_order</td><td>INT</td><td>NO</td><td>—</td><td>0</td><td>표시 순서</td></tr>
          <tr><td>created_at</td><td>DATETIME</td><td>NO</td><td>—</td><td>CURRENT_TIMESTAMP</td><td>등록일</td></tr>
          <tr><td>updated_at</td><td>DATETIME</td><td>NO</td><td>—</td><td>ON UPDATE</td><td>수정일</td></tr>
        </tbody>
      </table>

      <h3>option_items</h3>
      <p class="table-desc">옵션 항목 (세부 항목)</p>
      <table>
        <thead><tr><th>컬럼명</th><th>타입</th><th>NULL</th><th>키</th><th>기본값</th><th>설명</th></tr></thead>
        <tbody>
          <tr><td>id</td><td>BIGINT</td><td>NO</td><td>PK</td><td>AUTO_INCREMENT</td><td>PK</td></tr>
          <tr><td>option_master_id</td><td>BIGINT</td><td>NO</td><td>FK→option_masters</td><td>—</td><td>옵션 그룹 FK</td></tr>
          <tr><td>name</td><td>VARCHAR(100)</td><td>NO</td><td>—</td><td>—</td><td>표시명 (예: 블랙, XL)</td></tr>
          <tr><td>value</td><td>VARCHAR(100)</td><td>YES</td><td>—</td><td>—</td><td>SKU 키용 값</td></tr>
          <tr><td>option_price</td><td>DECIMAL(12,0)</td><td>NO</td><td>—</td><td>0</td><td>추가 금액 (원)</td></tr>
          <tr><td>sort_order</td><td>INT</td><td>NO</td><td>—</td><td>0</td><td>표시 순서</td></tr>
          <tr><td>created_at</td><td>DATETIME</td><td>NO</td><td>—</td><td>CURRENT_TIMESTAMP</td><td>등록일</td></tr>
        </tbody>
      </table>

      <h3>product_skus</h3>
      <p class="table-desc">상품 SKU (조합형 옵션별 재고·가격)</p>
      <table>
        <thead><tr><th>컬럼명</th><th>타입</th><th>NULL</th><th>키</th><th>기본값</th><th>설명</th></tr></thead>
        <tbody>
          <tr><td>id</td><td>BIGINT</td><td>NO</td><td>PK</td><td>AUTO_INCREMENT</td><td>PK</td></tr>
          <tr><td>product_id</td><td>BIGINT</td><td>NO</td><td>FK→products</td><td>—</td><td>상품 FK</td></tr>
          <tr><td>option_key</td><td>VARCHAR(200)</td><td>NO</td><td>UK(product_id, option_key)</td><td>—</td><td>조합 키 (예: color:black,size:XL)</td></tr>
          <tr><td>option_price</td><td>DECIMAL(12,0)</td><td>NO</td><td>—</td><td>0</td><td>추가 금액 (원)</td></tr>
          <tr><td>stock</td><td>INT</td><td>NO</td><td>—</td><td>0</td><td>현재 재고</td></tr>
          <tr><td>sell_status</td><td>VARCHAR(20)</td><td>NO</td><td>—</td><td>on_sale</td><td>on_sale / out_of_stock / hidden</td></tr>
          <tr><td>created_at</td><td>DATETIME</td><td>NO</td><td>—</td><td>CURRENT_TIMESTAMP</td><td>등록일</td></tr>
          <tr><td>updated_at</td><td>DATETIME</td><td>NO</td><td>—</td><td>ON UPDATE</td><td>수정일</td></tr>
        </tbody>
      </table>

      <h3>product_text_option_specs</h3>
      <p class="table-desc">직접입력형 옵션 스펙 (각인 등)</p>
      <table>
        <thead><tr><th>컬럼명</th><th>타입</th><th>NULL</th><th>키</th><th>기본값</th><th>설명</th></tr></thead>
        <tbody>
          <tr><td>id</td><td>BIGINT</td><td>NO</td><td>PK</td><td>AUTO_INCREMENT</td><td>PK</td></tr>
          <tr><td>product_id</td><td>BIGINT</td><td>NO</td><td>FK→products</td><td>—</td><td>상품 FK</td></tr>
          <tr><td>option_master_id</td><td>BIGINT</td><td>NO</td><td>FK→option_masters</td><td>—</td><td>옵션 그룹 FK (type=text)</td></tr>
          <tr><td>label</td><td>VARCHAR(200)</td><td>NO</td><td>—</td><td>—</td><td>화면 라벨 (예: 각인 문구)</td></tr>
          <tr><td>placeholder</td><td>VARCHAR(200)</td><td>YES</td><td>—</td><td>—</td><td>placeholder</td></tr>
          <tr><td>max_length</td><td>INT</td><td>YES</td><td>—</td><td>—</td><td>최대 글자 수</td></tr>
          <tr><td>sort_order</td><td>INT</td><td>NO</td><td>—</td><td>0</td><td>표시 순서</td></tr>
          <tr><td>created_at</td><td>DATETIME</td><td>NO</td><td>—</td><td>CURRENT_TIMESTAMP</td><td>등록일</td></tr>
        </tbody>
      </table>

      <h3>product_detail_lines</h3>
      <p class="table-desc">상품 상세 설명 줄 (상품 정보 탭)</p>
      <table>
        <thead><tr><th>컬럼명</th><th>타입</th><th>NULL</th><th>키</th><th>기본값</th><th>설명</th></tr></thead>
        <tbody>
          <tr><td>id</td><td>BIGINT</td><td>NO</td><td>PK</td><td>AUTO_INCREMENT</td><td>PK</td></tr>
          <tr><td>product_id</td><td>BIGINT</td><td>NO</td><td>FK→products</td><td>—</td><td>상품 FK</td></tr>
          <tr><td>sort_order</td><td>INT</td><td>NO</td><td>—</td><td>0</td><td>표시 순서</td></tr>
          <tr><td>line_text</td><td>VARCHAR(500)</td><td>NO</td><td>—</td><td>—</td><td>설명 한 줄</td></tr>
          <tr><td>created_at</td><td>DATETIME</td><td>NO</td><td>—</td><td>CURRENT_TIMESTAMP</td><td>등록일</td></tr>
        </tbody>
      </table>

      <h3>banners</h3>
      <p class="table-desc">배너 (메인 캐러셀)</p>
      <table>
        <thead><tr><th>컬럼명</th><th>타입</th><th>NULL</th><th>키</th><th>기본값</th><th>설명</th></tr></thead>
        <tbody>
          <tr><td>id</td><td>BIGINT</td><td>NO</td><td>PK</td><td>AUTO_INCREMENT</td><td>PK</td></tr>
          <tr><td>image_url</td><td>VARCHAR(500)</td><td>NO</td><td>—</td><td>—</td><td>이미지 URL</td></tr>
          <tr><td>link_url</td><td>VARCHAR(500)</td><td>YES</td><td>—</td><td>—</td><td>클릭 시 이동 URL</td></tr>
          <tr><td>sort_order</td><td>INT</td><td>NO</td><td>—</td><td>0</td><td>슬라이드 순서</td></tr>
          <tr><td>is_active</td><td>TINYINT(1)</td><td>NO</td><td>—</td><td>1</td><td>노출 여부</td></tr>
          <tr><td>created_at</td><td>DATETIME</td><td>NO</td><td>—</td><td>CURRENT_TIMESTAMP</td><td>등록일</td></tr>
          <tr><td>updated_at</td><td>DATETIME</td><td>NO</td><td>—</td><td>ON UPDATE</td><td>수정일</td></tr>
        </tbody>
      </table>

      <h3>orders</h3>
      <p class="table-desc">주문</p>
      <table>
        <thead><tr><th>컬럼명</th><th>타입</th><th>NULL</th><th>키</th><th>기본값</th><th>설명</th></tr></thead>
        <tbody>
          <tr><td>id</td><td>BIGINT</td><td>NO</td><td>PK</td><td>AUTO_INCREMENT</td><td>PK</td></tr>
          <tr><td>user_id</td><td>BIGINT</td><td>YES</td><td>FK→users</td><td>—</td><td>주문자 FK (비회원 시 NULL)</td></tr>
          <tr><td>order_number</td><td>VARCHAR(50)</td><td>NO</td><td>UNIQUE</td><td>—</td><td>주문번호</td></tr>
          <tr><td>status</td><td>VARCHAR(20)</td><td>NO</td><td>—</td><td>payment_complete</td><td>결제완료/배송준비중/배송중/배송완료</td></tr>
          <tr><td>total_amount</td><td>DECIMAL(12,0)</td><td>NO</td><td>—</td><td>0</td><td>상품 금액 합계 (원)</td></tr>
          <tr><td>delivery_fee</td><td>DECIMAL(12,0)</td><td>NO</td><td>—</td><td>0</td><td>배송비 (원)</td></tr>
          <tr><td>delivery_fee_template_id</td><td>BIGINT</td><td>YES</td><td>FK→delivery_fee_templates</td><td>—</td><td>적용된 배송비 템플릿</td></tr>
          <tr><td>warehouse_address_code_id</td><td>BIGINT</td><td>YES</td><td>FK→address_codes</td><td>—</td><td>출고지 주소 코드</td></tr>
          <tr><td>return_address_code_id</td><td>BIGINT</td><td>YES</td><td>FK→address_codes</td><td>—</td><td>반품/교환지 주소 코드</td></tr>
          <tr><td>shipping_method</td><td>VARCHAR(20)</td><td>NO</td><td>—</td><td>parcel</td><td>배송방법</td></tr>
          <tr><td>receiver_name</td><td>VARCHAR(100)</td><td>YES</td><td>—</td><td>—</td><td>수령인 이름</td></tr>
          <tr><td>receiver_phone</td><td>VARCHAR(20)</td><td>YES</td><td>—</td><td>—</td><td>수령인 연락처</td></tr>
          <tr><td>receiver_address</td><td>VARCHAR(500)</td><td>YES</td><td>—</td><td>—</td><td>수령 주소</td></tr>
          <tr><td>created_at</td><td>DATETIME</td><td>NO</td><td>—</td><td>CURRENT_TIMESTAMP</td><td>주문일</td></tr>
          <tr><td>updated_at</td><td>DATETIME</td><td>NO</td><td>—</td><td>ON UPDATE</td><td>수정일</td></tr>
        </tbody>
      </table>

      <h3>order_items</h3>
      <p class="table-desc">주문 상품</p>
      <table>
        <thead><tr><th>컬럼명</th><th>타입</th><th>NULL</th><th>키</th><th>기본값</th><th>설명</th></tr></thead>
        <tbody>
          <tr><td>id</td><td>BIGINT</td><td>NO</td><td>PK</td><td>AUTO_INCREMENT</td><td>PK</td></tr>
          <tr><td>order_id</td><td>BIGINT</td><td>NO</td><td>FK→orders</td><td>—</td><td>주문 FK</td></tr>
          <tr><td>product_id</td><td>BIGINT</td><td>YES</td><td>FK→products</td><td>—</td><td>상품 FK (삭제 시 NULL 허용)</td></tr>
          <tr><td>sku_id</td><td>BIGINT</td><td>YES</td><td>FK→product_skus</td><td>—</td><td>조합형일 때 SKU FK</td></tr>
          <tr><td>product_name</td><td>VARCHAR(200)</td><td>NO</td><td>—</td><td>—</td><td>주문 시점 상품명 (스냅샷)</td></tr>
          <tr><td>price</td><td>DECIMAL(12,0)</td><td>NO</td><td>—</td><td>—</td><td>주문 시점 단가 (원)</td></tr>
          <tr><td>quantity</td><td>INT</td><td>NO</td><td>—</td><td>1</td><td>수량</td></tr>
          <tr><td>option_text</td><td>VARCHAR(500)</td><td>YES</td><td>—</td><td>—</td><td>직접입력형 값 (예: 각인 문구)</td></tr>
          <tr><td>selected_options</td><td>JSON</td><td>YES</td><td>—</td><td>—</td><td>단독형 선택값 스냅샷</td></tr>
          <tr><td>created_at</td><td>DATETIME</td><td>NO</td><td>—</td><td>CURRENT_TIMESTAMP</td><td>등록일</td></tr>
        </tbody>
      </table>

      <h3>cart_items</h3>
      <p class="table-desc">장바구니</p>
      <table>
        <thead><tr><th>컬럼명</th><th>타입</th><th>NULL</th><th>키</th><th>기본값</th><th>설명</th></tr></thead>
        <tbody>
          <tr><td>id</td><td>BIGINT</td><td>NO</td><td>PK</td><td>AUTO_INCREMENT</td><td>PK</td></tr>
          <tr><td>user_id</td><td>BIGINT</td><td>NO</td><td>FK→users</td><td>—</td><td>사용자 FK</td></tr>
          <tr><td>product_id</td><td>BIGINT</td><td>NO</td><td>FK→products</td><td>—</td><td>상품 FK</td></tr>
          <tr><td>sku_id</td><td>BIGINT</td><td>YES</td><td>FK→product_skus</td><td>—</td><td>조합형일 때 SKU FK</td></tr>
          <tr><td>quantity</td><td>INT</td><td>NO</td><td>—</td><td>1</td><td>수량</td></tr>
          <tr><td>option_text</td><td>VARCHAR(500)</td><td>YES</td><td>—</td><td>—</td><td>직접입력형 값</td></tr>
          <tr><td>selected_options</td><td>JSON</td><td>YES</td><td>—</td><td>—</td><td>단독형 선택값</td></tr>
          <tr><td>created_at</td><td>DATETIME</td><td>NO</td><td>—</td><td>CURRENT_TIMESTAMP</td><td>담은 일시</td></tr>
          <tr><td>updated_at</td><td>DATETIME</td><td>NO</td><td>—</td><td>ON UPDATE</td><td>수정일</td></tr>
        </tbody>
      </table>

      <h3>wishlists</h3>
      <p class="table-desc">찜</p>
      <table>
        <thead><tr><th>컬럼명</th><th>타입</th><th>NULL</th><th>키</th><th>기본값</th><th>설명</th></tr></thead>
        <tbody>
          <tr><td>id</td><td>BIGINT</td><td>NO</td><td>PK</td><td>AUTO_INCREMENT</td><td>PK</td></tr>
          <tr><td>user_id</td><td>BIGINT</td><td>NO</td><td>FK→users</td><td>—</td><td>사용자 FK</td></tr>
          <tr><td>product_id</td><td>BIGINT</td><td>NO</td><td>FK→products</td><td>—</td><td>상품 FK</td></tr>
          <tr><td>created_at</td><td>DATETIME</td><td>NO</td><td>—</td><td>CURRENT_TIMESTAMP</td><td>찜한 일시</td></tr>
        </tbody>
      </table>
      <p><em>UNIQUE(user_id, product_id)</em></p>

      <h3>reviews</h3>
      <p class="table-desc">리뷰 (상품 상세 탭)</p>
      <table>
        <thead><tr><th>컬럼명</th><th>타입</th><th>NULL</th><th>키</th><th>기본값</th><th>설명</th></tr></thead>
        <tbody>
          <tr><td>id</td><td>BIGINT</td><td>NO</td><td>PK</td><td>AUTO_INCREMENT</td><td>PK</td></tr>
          <tr><td>product_id</td><td>BIGINT</td><td>NO</td><td>FK→products</td><td>—</td><td>상품 FK</td></tr>
          <tr><td>user_id</td><td>BIGINT</td><td>NO</td><td>FK→users</td><td>—</td><td>작성자 FK</td></tr>
          <tr><td>rating</td><td>TINYINT</td><td>NO</td><td>—</td><td>5</td><td>별점 1~5</td></tr>
          <tr><td>content</td><td>TEXT</td><td>YES</td><td>—</td><td>—</td><td>리뷰 내용</td></tr>
          <tr><td>created_at</td><td>DATETIME</td><td>NO</td><td>—</td><td>CURRENT_TIMESTAMP</td><td>작성일</td></tr>
        </tbody>
      </table>

      <h3>inquiries</h3>
      <p class="table-desc">문의 (상품 상세 탭)</p>
      <table>
        <thead><tr><th>컬럼명</th><th>타입</th><th>NULL</th><th>키</th><th>기본값</th><th>설명</th></tr></thead>
        <tbody>
          <tr><td>id</td><td>BIGINT</td><td>NO</td><td>PK</td><td>AUTO_INCREMENT</td><td>PK</td></tr>
          <tr><td>product_id</td><td>BIGINT</td><td>NO</td><td>FK→products</td><td>—</td><td>상품 FK</td></tr>
          <tr><td>user_id</td><td>BIGINT</td><td>NO</td><td>FK→users</td><td>—</td><td>문의자 FK</td></tr>
          <tr><td>title</td><td>VARCHAR(200)</td><td>YES</td><td>—</td><td>—</td><td>문의 제목</td></tr>
          <tr><td>content</td><td>TEXT</td><td>NO</td><td>—</td><td>—</td><td>문의 내용</td></tr>
          <tr><td>answer</td><td>TEXT</td><td>YES</td><td>—</td><td>—</td><td>답변 내용</td></tr>
          <tr><td>answered_at</td><td>DATETIME</td><td>YES</td><td>—</td><td>—</td><td>답변 일시</td></tr>
          <tr><td>created_at</td><td>DATETIME</td><td>NO</td><td>—</td><td>CURRENT_TIMESTAMP</td><td>문의일</td></tr>
        </tbody>
      </table>

      <h3>coupons</h3>
      <p class="table-desc">쿠폰 (마이페이지 쿠폰 정의)</p>
      <table>
        <thead><tr><th>컬럼명</th><th>타입</th><th>NULL</th><th>키</th><th>기본값</th><th>설명</th></tr></thead>
        <tbody>
          <tr><td>id</td><td>BIGINT</td><td>NO</td><td>PK</td><td>AUTO_INCREMENT</td><td>PK</td></tr>
          <tr><td>code</td><td>VARCHAR(50)</td><td>NO</td><td>UNIQUE</td><td>—</td><td>쿠폰 코드 (예: WELCOME10)</td></tr>
          <tr><td>name</td><td>VARCHAR(200)</td><td>NO</td><td>—</td><td>—</td><td>쿠폰명</td></tr>
          <tr><td>discount_type</td><td>VARCHAR(20)</td><td>NO</td><td>—</td><td>—</td><td>percent / fixed</td></tr>
          <tr><td>discount_value</td><td>DECIMAL(12,0)</td><td>NO</td><td>—</td><td>—</td><td>할인값 (% 또는 원)</td></tr>
          <tr><td>min_order_amount</td><td>DECIMAL(12,0)</td><td>NO</td><td>—</td><td>0</td><td>최소 주문 금액 (원)</td></tr>
          <tr><td>max_discount_amount</td><td>DECIMAL(12,0)</td><td>YES</td><td>—</td><td>—</td><td>최대 할인 금액 (percent 시 상한)</td></tr>
          <tr><td>valid_from</td><td>DATETIME</td><td>NO</td><td>—</td><td>—</td><td>사용 가능 시작일</td></tr>
          <tr><td>valid_until</td><td>DATETIME</td><td>NO</td><td>—</td><td>—</td><td>사용 가능 종료일</td></tr>
          <tr><td>total_quantity</td><td>INT</td><td>YES</td><td>—</td><td>—</td><td>총 발급 수량 (NULL=무제한)</td></tr>
          <tr><td>used_quantity</td><td>INT</td><td>NO</td><td>—</td><td>0</td><td>사용된 수량</td></tr>
          <tr><td>is_active</td><td>TINYINT(1)</td><td>NO</td><td>—</td><td>1</td><td>노출/사용 가능 여부</td></tr>
          <tr><td>created_at</td><td>DATETIME</td><td>NO</td><td>—</td><td>CURRENT_TIMESTAMP</td><td>등록일</td></tr>
          <tr><td>updated_at</td><td>DATETIME</td><td>NO</td><td>—</td><td>ON UPDATE</td><td>수정일</td></tr>
        </tbody>
      </table>

      <h3>user_coupons</h3>
      <p class="table-desc">사용자 쿠폰 (마이페이지 쿠폰 보유)</p>
      <table>
        <thead><tr><th>컬럼명</th><th>타입</th><th>NULL</th><th>키</th><th>기본값</th><th>설명</th></tr></thead>
        <tbody>
          <tr><td>id</td><td>BIGINT</td><td>NO</td><td>PK</td><td>AUTO_INCREMENT</td><td>PK</td></tr>
          <tr><td>user_id</td><td>BIGINT</td><td>NO</td><td>FK→users</td><td>—</td><td>사용자 FK</td></tr>
          <tr><td>coupon_id</td><td>BIGINT</td><td>NO</td><td>FK→coupons</td><td>—</td><td>쿠폰 FK</td></tr>
          <tr><td>used_at</td><td>DATETIME</td><td>YES</td><td>—</td><td>—</td><td>사용 일시 (NULL=미사용)</td></tr>
          <tr><td>order_id</td><td>BIGINT</td><td>YES</td><td>FK→orders</td><td>—</td><td>사용한 주문 FK</td></tr>
          <tr><td>created_at</td><td>DATETIME</td><td>NO</td><td>—</td><td>CURRENT_TIMESTAMP</td><td>발급/다운로드 일시</td></tr>
        </tbody>
      </table>

      <h3>user_addresses</h3>
      <p class="table-desc">사용자 배송지 (마이페이지 배송지 관리)</p>
      <table>
        <thead><tr><th>컬럼명</th><th>타입</th><th>NULL</th><th>키</th><th>기본값</th><th>설명</th></tr></thead>
        <tbody>
          <tr><td>id</td><td>BIGINT</td><td>NO</td><td>PK</td><td>AUTO_INCREMENT</td><td>PK</td></tr>
          <tr><td>user_id</td><td>BIGINT</td><td>NO</td><td>FK→users</td><td>—</td><td>사용자 FK</td></tr>
          <tr><td>label</td><td>VARCHAR(50)</td><td>YES</td><td>—</td><td>—</td><td>배송지 별칭 (예: 집, 회사)</td></tr>
          <tr><td>recipient_name</td><td>VARCHAR(100)</td><td>NO</td><td>—</td><td>—</td><td>수령인</td></tr>
          <tr><td>phone</td><td>VARCHAR(20)</td><td>NO</td><td>—</td><td>—</td><td>연락처</td></tr>
          <tr><td>postal_code</td><td>VARCHAR(20)</td><td>YES</td><td>—</td><td>—</td><td>우편번호</td></tr>
          <tr><td>address</td><td>VARCHAR(500)</td><td>NO</td><td>—</td><td>—</td><td>기본 주소</td></tr>
          <tr><td>address_detail</td><td>VARCHAR(200)</td><td>YES</td><td>—</td><td>—</td><td>상세 주소</td></tr>
          <tr><td>is_default</td><td>TINYINT(1)</td><td>NO</td><td>—</td><td>0</td><td>기본 배송지 여부</td></tr>
          <tr><td>created_at</td><td>DATETIME</td><td>NO</td><td>—</td><td>CURRENT_TIMESTAMP</td><td>등록일</td></tr>
          <tr><td>updated_at</td><td>DATETIME</td><td>NO</td><td>—</td><td>ON UPDATE</td><td>수정일</td></tr>
        </tbody>
      </table>

      <h3>user_payment_methods</h3>
      <p class="table-desc">저장 결제수단 (마이페이지 결제수단, PG 토큰/식별자만 저장)</p>
      <table>
        <thead><tr><th>컬럼명</th><th>타입</th><th>NULL</th><th>키</th><th>기본값</th><th>설명</th></tr></thead>
        <tbody>
          <tr><td>id</td><td>BIGINT</td><td>NO</td><td>PK</td><td>AUTO_INCREMENT</td><td>PK</td></tr>
          <tr><td>user_id</td><td>BIGINT</td><td>NO</td><td>FK→users</td><td>—</td><td>사용자 FK</td></tr>
          <tr><td>pg_provider</td><td>VARCHAR(50)</td><td>NO</td><td>—</td><td>—</td><td>PG사 식별자 (예: toss, nice)</td></tr>
          <tr><td>display_name</td><td>VARCHAR(100)</td><td>YES</td><td>—</td><td>—</td><td>사용자 지정 별칭</td></tr>
          <tr><td>masked_info</td><td>VARCHAR(100)</td><td>YES</td><td>—</td><td>—</td><td>마스킹된 표시 (예: ****-****-1234)</td></tr>
          <tr><td>billing_key_or_token</td><td>VARCHAR(500)</td><td>YES</td><td>—</td><td>—</td><td>PG 빌링키/토큰</td></tr>
          <tr><td>is_default</td><td>TINYINT(1)</td><td>NO</td><td>—</td><td>0</td><td>기본 결제수단 여부</td></tr>
          <tr><td>created_at</td><td>DATETIME</td><td>NO</td><td>—</td><td>CURRENT_TIMESTAMP</td><td>등록일</td></tr>
          <tr><td>updated_at</td><td>DATETIME</td><td>NO</td><td>—</td><td>ON UPDATE</td><td>수정일</td></tr>
        </tbody>
      </table>
    </section>
  </div>
</body>
</html>
